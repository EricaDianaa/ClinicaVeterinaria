
@model ClinicaVeterinaria.Models.AnimaliRicoverati
@{
    ViewBag.Title = "RicercaAnimale";
}


@*@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()*@

<div class="form-horizontal bg-info mx-auto align-items-center justify-content-around  d-flex text-center border border-info border-2 rounded-4">
    <img class="w-50 p-3 rounded-5" src="https://www.animalidacompagnia.it/wp-content/uploads/2022/03/animali-da-compagnia-quali-sono.jpg" alt="Alternate Text" />
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <div class="">
        <input type="text" name="CodiceFiscale" id="Input1" class="form-control mt-3" />
        <button id="Cerca1">Cerca</button>

        
        @*<div class="form-group ">
            @Html.LabelFor(model => model.NumeroMicrochip, htmlAttributes: new { @class = "" })
            <div class="">
                @Html.EditorFor(model => model.NumeroMicrochip, new { htmlAttributes = new { @class = "me-2 rounded-3" } })
                @Html.ValidationMessageFor(model => model.NumeroMicrochip, "", new { @class = "text-danger" })
            </div>*@
    </div>

    @*<div class="form-group">
                <div class="col-md-offset-2 ">
                    <input type="submit" value="Cerca" class="btn btn-primary" />
                </div>
            </div>
        </div>*@
</div>
<div class="d-md-flex">

    <div class="container">

        <div class="row" id="List1">

        </div>
    </div>

    <div class="container">

        <div class="row" id="List">

        </div>
    </div>


</div>
@if (Session["NessunAnimale"] != null)
{
    <h2 class="text-center border border-dark bg-info mt-4 p-3 ">Nessun risultato trovato</h2>
}


@section scripts {
    <script type="text/javascript">

        $(document).ready(function () {

            $("#Cerca1").click(function () {
                var valore = $("#Input1").val()
                console.log(valore)
                $.ajax({
                    method: "POST",
                    url: "RicercaAnimale1",
                    data: { NumeroMicrochip: valore },
                    success: function (data) {
                        console.log(data)
                        $.each(data, function (i, v) {
                            var licurrent =
                                "  <div class='d-flex flex-column text-center'>" +
                                    " <div class='row'>"+
                                " <div class='col-lg-5 col-md-12 mb-4 rounded-3 bg-info border border-info mt-4'>"+
                                " <div class='card'>"+
                                " <h2 class='text-center'>Dettagli</h2>"+
                                " <div class='bg-image hover-overlay ripple' data-mdb-ripple-color='light'>"
                    //if(v.Foto == null)
                    //{
                    //    + "<img src='https://www.comune.marzabotto.bo.it/servizi/funzioni/download.aspx?id=4148&idc=2764' class='img-fluid' />"
                    //} else {
                    
                    //   + " <img src='Content/Immagini "+ v.Foto + "' class='img-fluid'/>"
                    //}
                           + " <a href='#!'>"+
                       " <div class='mask' style='background-color: rgba(251, 251, 251, 0.15);'></div></a>  </div>"+
              "  <div class='card-body'>"+
                                "  <h5 class='card-title'>" + v.Nome  +   "</h5>" +
                    "<div class='card-text'>"+
                        "  <p><strong>Nome proprietario:</strong>" + v.NomeProprietario+"</p>"+
                        " <p><strong>Cognome proprietario:</strong>" +v.CognomeProprietario+"</p>"+
                        " <p><strong>Data di nascita:</strong>"+v.DataNascita+"</p>" +
                        " <p><strong>Colore del pelo:</strong>"+v.ColoreMantello+"</p>" +
                        " <p><strong>Tipologia:</strong>"+ @ViewBag.Nome+"</p>"+
                        " </div>"+
                "</div>"+
            "</div>"+
       " </div>"+
   " </div>"+
"</div>"
                            $("#List1").append(licurrent);
                        })
                    }

                })

            })


 
            $("#Cerca1").click(function () {
                $.ajax({
                    method: "GET",
                    url: "RicercaAnimale2",
                    success: function (data) {
                        console.log("Visite" , data)
                        $.each(data, function (index, v) {
                            var licurrent = " <div class='d-flex flex-column mt-4'>" +
                                "<h2 class='text-center text - black'>Visite</h2>" +
                                "<table class='table table-bordered border-dark'>" +
                                "<thead>" +
                                "<tr class='bg-info'>" +
                                "<th scope='col'></th>" +
                                "<th scope='col'>Data visita</th>" +
                                "<th scope='col'>Descrizione</th></tr></thead> <tbody><tr>" +
                                "<th scope='row' class='bg-info'>" + v.idVisite + "</th>" +
                                "<td>" + v.Data + "</td>" +
                                "<td>" + v.Descrizione + "</td></tr></tbody></table></div>";


                            $("#List").append(licurrent)
                        });
                    }
                })
            })
  
        })
    </script>
}